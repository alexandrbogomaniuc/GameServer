---
name: frontend-error-testing
description: Best practices for diagnosing and testing frontend errors using the `chrome-devtools` MCP server. Use this skill when a web application is crashing, failing to load assets, or exhibiting unexpected UI behavior. It provides a structured workflow for using console logs, network inspection, and active probing.
---

# Frontend Error Testing avec Chrome DevTools

This skill provides a structured protocol for diagnosing frontend issues. It forces a "Source of Truth" approach using the `chrome-devtools` MCP server to bypass unreliable UI descriptions.

## Core Diagnostic Protocol

### 1. Identify the Context
Always start by listing open pages to ensure you are targeting the correct runtime environment.
- **Action**: Call `list_pages`.
- **Action**: Call `select_page` with the appropriate `pageId`.

### 2. Check the Console (The "Black Box")
The console is the most reliable source for runtime errors.
- **Action**: Call `list_console_messages`.
- **Guidance**: Look for "error" or "warn" types. Specifically search for stack traces.
- **Protocol**: If the console is empty but an error is suspected, proceed to [Active Probing](#active-probing).

### 3. Inspect Network Activity
Use this if the application fails to load data, assets, or WebSocket connections.
- **Action**: Call `list_network_requests`.
- **Guidance**: Look for status codes 4xx or 5xx. Check for `Type: websocket` issues (e.g., failed handshakes).
- **Detail**: Use `get_network_request` with a specific `reqid` to see precise headers and response bodies.

### 4. Active Probing ("Runtime Insight")
When logs are silent, use `evaluate_script` to dump the application state.
- **Action**: Call `evaluate_script`.
- **Payload Example**:
  ```javascript
  () => {
    return {
      loc: window.location.href,
      config: window.appConfig || "Not Found",
      isLoaded: !!document.querySelector('#app-root'),
      globals: Object.keys(window).filter(k => k.match(/^[A-Z_]+$/))
    }
  }
  ```

## Common Error Patterns & Remedies

| Error Type | Likely Cause | Diagnostic Tool |
| :--- | :--- | :--- |
| `TypeError: Cannot read property...` | Undefined variable or failed API fetch. | `evaluate_script` (dump relevant variable) |
| `404 Not Found` | Incorrect asset path or missing static config. | `list_network_requests` |
| `WebSocket Error` | Backend down or incorrect WS URL. | `list_network_requests` + `get_network_request` |
| `ReferenceError` | Missing import or global scope pollutant. | `list_console_messages` |

## Advanced Verification
- **Screenshotting**: Use `take_screenshot` to verify layout shifts or "White Screen of Death" scenarios where the DOM might actually be present but invisible.
- **Accessibility Tree**: Use `take_snapshot` to understand the structure if the visual render is broken.

---
See [references/common-errors.md](references/common-errors.md) for a deep dive into specific framework errors (React, Vue, Vanilla).
