import DialogView from '../../DialogView';
import DialogRefreshButtonView from './DialogRefreshButtonView';
import I18 from '../../../../../../../../../common/PIXI/src/I18';
import NumberValueFormat from '../../../../../../../../../common/PIXI/src/view/custom/values/NumberValueFormat';

class GameRebuyDialogView extends DialogView
{
	constructor()
	{
		super();
	}

	startBalanceRefreshingHandling()
	{
		this._lockDialog();
		this.customButton && this.customButton.startCaptionRotation();
	}

	stopBalanceRefreshingHandling()
	{
		this._unlockDialog();
		this.customButton && this.customButton.interruptCaptionRotation();
	}

	__retreiveDialogButtonViewInstance (aIntId_int)
	{
		if (aIntId_int === 1)
		{
			return new DialogRefreshButtonView();
		}

		return super.__retreiveDialogButtonViewInstance(aIntId_int);
	}

	setMessage(messageId, aOptRebuyValue_num = undefined, aOptRechargeValue_str = undefined, aCurrenceSymbol_str = undefined)
	{
		this._setMessage(messageId, aOptRebuyValue_num, aOptRechargeValue_str, aCurrenceSymbol_str);
	}

	_setMessage(messageId, aOptRebuyValue_num = undefined, aOptRechargeValue_str = undefined, aCurrenceSymbol_str = undefined)
	{
		this._messageContainer.destroyChildren();

		let msg = I18.generateNewCTranslatableAsset(messageId);
		let msgText = msg.text;
	
		let lCurrencySymbol_str	= aCurrenceSymbol_str || "";
		msgText = msgText.replace("/CURRENCY_SYMBOL/", "\u200E"+lCurrencySymbol_str+"\u200E");
		
		let lRebuyValue_str	= isNaN(aOptRebuyValue_num) ? "" : NumberValueFormat.formatMoney(aOptRebuyValue_num);
		msgText = msgText.replace("/REBUY_VALUE/", lRebuyValue_str);

		let lRechargeValue_str	= isNaN(aOptRechargeValue_str) ? "" : NumberValueFormat.formatMoney(aOptRechargeValue_str);
		msgText = msgText.replace("/RECHARGE_VALUE/", lRechargeValue_str);
		
		msg.text = msgText;
		this._messageContainer.addChild(msg);
	}

}

export default GameRebuyDialogView;